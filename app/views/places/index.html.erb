<div class='container'>
  <div class='row'>
    <div class='col-md-6 col-xs-12'>
      <div class='banner-form index'>
        <form action="<%= places_path %>" class='index'>

          <div class="dropdown tr-change-dropdown index">
            <select name="start_month" class="form-control">
              <option value="">Start Month</option>
              <% months = %w[January February March April May June July August September October November December] %>

              <% months.each_with_index do |month, index| %>

                <option value='<%= index + 1 %>' <%= 'selected' if index + 1 == @start_month %> ><%= month %></option>
              <% end %>
            </select>
          </div><!-- /.category-change -->
          <div class="dropdown tr-change-dropdown index">
            <select name="end_month" class="form-control">
              <option selected value="">End Month</option>
              <% months.each_with_index do |month, index| %>
                <option value='<%= index + 1 %>' <%= 'selected' if index + 1 == @end_month %>><%= month %></option>
              <% end %>
            </select>
          </div><!-- /.category-change -->
          <button type="submit" class="btn btn-primary" value="Search">Search</button>
        </form>
      </div>
      <% @places.each do |place| %>
        <%= render 'shared/cardindex', place: place %>
      <% end %>
    </div>
    <div class='col-md-6 col-xs-12'>
      <div class='sticky-content' style='margin-top:35px;'>
        <div class="col-md-12">
          <div id="map" style="width: 100%; height: 600px;"></div>
        </div>
      </div>
            <% content_for(:after_js) do %>
                <%= javascript_tag do %>

                  var styles = [

    {
        "featureType": "landscape.natural",
        "elementType": "geometry.fill",
        "stylers": [
            {
                "visibility": "on"
            },
            {
                "color": "#e0efef"
            }
        ]
    },
    {
        "featureType": "poi",
        "elementType": "geometry.fill",
        "stylers": [
            {
                "visibility": "on"
            },
            {
                "hue": "#1900ff"
            },
            {
                "color": "#c0e8e8"
            }
        ]
    },
    {
        "featureType": "road",
        "elementType": "geometry",
        "stylers": [
            {
                "lightness": 100
            },
            {
                "visibility": "simplified"
            }
        ]
    },
    {
        "featureType": "road",
        "elementType": "labels",
        "stylers": [
            {
                "visibility": "off"
            }
        ]
    },
    {
        "featureType": "transit.line",
        "elementType": "geometry",
        "stylers": [
            {
                "visibility": "on"
            },
            {
                "lightness": 700
            }
        ]
    },
    {
        "featureType": "water",
        "elementType": "all",
        "stylers": [
            {
                "color": "#7dcdcd"
            }
        ]
    }
]


                  $(document).ready(function() {
            var handler = Gmaps.build('Google');
            handler.buildMap({ internal: { id: 'map' },provider: {styles: styles } }, function() {
              markers = handler.addMarkers(<%= raw @hash.to_json %>);
              handler.bounds.extendWith(markers);
              handler.getMap().setZoom(2);
              if (markers.length == 0) {
                handler.getMap().setZoom(1);
              } else if (markers.length == 1) {
                handler.getMap().setZoom(1);
              }
            });
          });
           <% end %>
         <% end %>
      </div>
    </div>
  </div>
</div>








